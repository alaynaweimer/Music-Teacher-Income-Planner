<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Capacity Planner - Discover Your Success with Alayna Marie</title>
<!--
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  STUDENT CAPACITY PLANNER - MUSIC TEACHERS
  Copyright ¬© 2025 Alayna Marie Weimer. All Rights Reserved.
  BRAND: Discover Your Success with Alayna Marie
  For inquiries: alayna@ignitepositivechanges.com
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 50%, #E76F51 100%);
            min-height: 100vh;
            padding-bottom: 40px;
        }
        #passwordOverlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 50%, #E76F51 100%);
            display: flex; align-items: center; justify-content: center; z-index: 9999;
        }
        #passwordOverlay.hidden { display: none; }
        .password-box {
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); max-width: 400px; width: 90%; text-align: center;
        }
        .password-box h2 { color: #2c3e50; margin-bottom: 10px; font-size: 1.8em; }
        .password-box p { color: #666; margin-bottom: 30px; }
        .password-box input {
            width: 100%; padding: 15px; border: 2px solid #e0e0e0;
            border-radius: 10px; font-size: 1.1em; margin-bottom: 20px;
        }
        .password-box input:focus { outline: none; border-color: #F4A261; }
        .password-box button {
            width: 100%; background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            color: #2c3e50; border: none; padding: 15px; font-size: 1.1em;
            border-radius: 10px; cursor: pointer; font-weight: 700;
        }
        .error-message { color: #dc2626; margin-top: 15px; font-size: 0.9em; display: none; }
        .error-message.show { display: block; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .header {
            background: white; border-radius: 20px; padding: 30px 20px;
            text-align: center; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .back-link {
            display: inline-block; color: #F4A261; text-decoration: none;
            margin-bottom: 15px; font-weight: 600;
        }
        .back-link:hover { text-decoration: underline; }
        .logo-text {
            font-size: 2.5em; font-weight: 700; color: #2c3e50; margin-bottom: 10px;
        }
        .logo-subtitle { font-size: 1.2em; color: #F4A261; font-weight: 600; margin-bottom: 20px; }
        .header h1 { color: #2c3e50; font-size: 2.2em; margin-bottom: 10px; font-weight: 700; }
        .why-matters {
            background: white; border-radius: 15px; padding: 35px; margin-bottom: 30px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); border-top: 5px solid #FFD93D;
        }
        .why-matters h2 { color: #2c3e50; font-size: 1.8em; margin-bottom: 20px; font-weight: 700; }
        .why-matters p { color: #2c3e50; font-size: 1.05em; margin-bottom: 15px; line-height: 1.7; }
        .why-matters strong { color: #F4A261; }
        .benefits-banner {
            background: linear-gradient(180deg, #ffffff 0%, #FFE8CC 50%);
            border: 3px solid #FFD93D; border-radius: 15px; padding: 30px; margin-bottom: 30px;
            box-shadow: 0 6px 20px rgba(244, 162, 97, 0.3);
        }
        .benefits-banner h2 {
            color: #2c3e50; font-size: 1.6em; margin-bottom: 20px; text-align: center; font-weight: 700;
        }
        .benefit-item {
            display: flex; align-items: start; margin: 15px 0; padding: 12px;
            background: white; border-radius: 10px; border-left: 4px solid #F4A261;
        }
        .benefit-icon { font-size: 1.5em; margin-right: 15px; min-width: 30px; }
        .benefit-text strong { color: #2c3e50; display: block; margin-bottom: 5px; }
        .benefit-text p { color: #666; margin: 0; }
        .content-box {
            background: white; border-radius: 15px; padding: 40px;
            margin-bottom: 30px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        .section {
            margin-bottom: 30px; padding: 25px; background: #f8f9fa;
            border-radius: 12px; border-left: 5px solid #F4A261;
        }
        .section h2 { color: #2c3e50; font-size: 1.5em; margin-bottom: 20px; font-weight: 700; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #2c3e50; font-weight: 600; font-size: 1.05em; }
        .help-text { font-size: 0.85em; color: #666; margin-top: 4px; font-style: italic; }
        input[type="number"] {
            width: 100%; padding: 14px; border: 2px solid #e0e0e0;
            border-radius: 8px; font-size: 1em; transition: border-color 0.3s;
        }
        input:focus { outline: none; border-color: #F4A261; box-shadow: 0 0 0 3px rgba(244, 162, 97, 0.1); }
        .radio-group {
            display: flex; flex-direction: column; gap: 10px;
        }
        .radio-option {
            display: flex; align-items: center; gap: 10px; padding: 15px;
            background: white; border-radius: 8px; cursor: pointer; border: 2px solid #e0e0e0;
            transition: all 0.3s;
        }
        .radio-option:hover { border-color: #F4A261; }
        .radio-option input[type="radio"] { width: 20px; height: 20px; cursor: pointer; }
        .radio-option.selected { border-color: #F4A261; background: #fff8f0; }
        .calculate-btn {
            width: 100%; background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            color: #2c3e50; border: none; padding: 18px; font-size: 1.3em;
            border-radius: 12px; cursor: pointer; font-weight: 700; margin-top: 20px;
            transition: transform 0.2s, box-shadow 0.2s; text-transform: uppercase; letter-spacing: 1px;
        }
        .calculate-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(244, 162, 97, 0.4); }
        .results { display: none; margin-top: 30px; }
        .results.show { display: block; }
        .summary-cards {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        .summary-card {
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            padding: 25px; border-radius: 15px; text-align: center;
            box-shadow: 0 6px 20px rgba(244, 162, 97, 0.3);
        }
        .summary-card h3 {
            color: #2c3e50; font-size: 0.9em; margin-bottom: 10px;
            text-transform: uppercase; font-weight: 700;
        }
        .summary-card .value { color: #2c3e50; font-size: 2em; font-weight: bold; }
        .breakdown {
            background: white; padding: 30px; border-radius: 15px;
            margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .breakdown h3 { color: #2c3e50; margin-bottom: 20px; font-size: 1.5em; font-weight: 700; }
        .breakdown-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; margin-bottom: 10px; background: #f8f9fa;
            border-radius: 8px; border-left: 4px solid #F4A261;
        }
        .breakdown-item .label { color: #666; font-weight: 600; flex: 1; }
        .breakdown-item .sublabel { color: #999; font-size: 0.85em; display: block; margin-top: 3px; }
        .breakdown-item .amount { font-size: 1.2em; font-weight: bold; color: #2c3e50; }
        .final-amount {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white; padding: 30px; border-radius: 15px; text-align: center;
            margin-top: 20px; box-shadow: 0 6px 20px rgba(16, 185, 129, 0.3);
        }
        .final-amount.warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        .final-amount.critical {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        .final-amount h3 { font-size: 1.3em; margin-bottom: 10px; }
        .final-amount .value { font-size: 3.5em; font-weight: bold; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
        .alert-box {
            background: #fee2e2; border-left: 5px solid #dc2626; padding: 25px;
            border-radius: 10px; margin-top: 25px;
        }
        .alert-box strong { color: #dc2626; display: block; margin-bottom: 15px; font-size: 1.15em; }
        .alert-box p { color: #2c3e50; margin: 12px 0; line-height: 1.7; }
        .tip-box {
            background: #e3f2fd; border-left: 5px solid #2196f3; padding: 25px;
            border-radius: 10px; margin-top: 25px;
        }
        .tip-box strong { color: #1976d2; display: block; margin-bottom: 15px; font-size: 1.15em; }
        .tip-box p { color: #2c3e50; margin: 12px 0; line-height: 1.7; }
        .footer {
            background: white; border-radius: 15px; padding: 30px; margin-top: 30px;
            text-align: center; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        .footer p { color: #666; margin: 8px 0; }
        .footer a { color: #F4A261; text-decoration: none; font-weight: 600; }
        .footer a:hover { text-decoration: underline; }
        .footer .brand-name { color: #2c3e50; font-weight: 700; font-size: 1.2em; margin-top: 15px; }
        .footer .copyright { color: #999; font-size: 0.9em; margin-top: 10px; }
        @media (max-width: 768px) {
            .logo-text { font-size: 1.8em; }
            .header h1 { font-size: 1.6em; }
            .summary-cards { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div id="passwordOverlay">
        <div class="password-box">
            <h2>üîê Access Required</h2>
            <p>Enter your toolkit password to access this tool</p>
            <input type="password" id="passwordInput" placeholder="Enter password">
            <button onclick="checkPassword()">Unlock Tool</button>
            <div id="errorMessage" class="error-message">‚ùå Incorrect password. Please try again.</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <a href="music-teacher-index.html" class="back-link">‚Üê Back to Toolkit Hub</a>
            <div class="logo-text">Discover Your Success</div>
            <div class="logo-subtitle">with Alayna Marie</div>
            <h1>üë• Student Capacity Planner</h1>
        </div>

        <div class="why-matters">
            <h2>üéØ Why This Matters</h2>
            <p>Here's the question every music teacher faces: "How many students do I need?" Most answer with "as many as I can get." But that's the wrong answer.</p>
            <p>Taking on too many students leads to burnout, declining teaching quality, and ironically‚Äîless satisfaction even though you're making more money. Taking on too few students means you're not hitting your financial goals and constantly stressed about money.</p>
            <p><strong>The truth:</strong> There's a sweet spot‚Äîthe exact number of students you need to hit your income goal without sacrificing your sanity, teaching quality, or personal life. That number is different for everyone based on their rates, available time, and financial needs.</p>
            <p>This planner does the math for you. You'll know exactly how many students you need (not "as many as possible"), whether you can realistically handle that load, and if your schedule has room for growth or if you're already at capacity.</p>
        </div>

        <div class="benefits-banner">
            <h2>‚ú® What You'll Discover</h2>
            <div class="benefit-item">
                <div class="benefit-icon">üéØ</div>
                <div class="benefit-text">
                    <strong>Your Magic Number</strong>
                    <p>Exact number of students needed to hit your income goal</p>
                </div>
            </div>
            <div class="benefit-item">
                <div class="benefit-icon">‚è∞</div>
                <div class="benefit-text">
                    <strong>Realistic Time Assessment</strong>
                    <p>Whether you can actually handle that student load with your available hours</p>
                </div>
            </div>
            <div class="benefit-item">
                <div class="benefit-icon">üìä</div>
                <div class="benefit-text">
                    <strong>Capacity Analysis</strong>
                    <p>Know if you're underbooked, optimal, or headed for burnout</p>
                </div>
            </div>
            <div class="benefit-item">
                <div class="benefit-icon">üí°</div>
                <div class="benefit-text">
                    <strong>Growth Strategy</strong>
                    <p>Clear path forward‚Äîraise rates, add students, or maintain current level</p>
                </div>
            </div>
        </div>

        <div class="content-box">
            <div class="section">
                <h2>üíµ Your Financial Goal</h2>
                
                <div class="form-group">
                    <label>What's your income goal?</label>
                    <div class="radio-group">
                        <div class="radio-option" onclick="selectRadio('goalType', 'specific')">
                            <input type="radio" name="goalType" value="specific" id="goalSpecific">
                            <label for="goalSpecific" style="margin: 0; cursor: pointer;">I have a specific monthly income goal</label>
                        </div>
                        <div class="radio-option" onclick="selectRadio('goalType', 'gap')">
                            <input type="radio" name="goalType" value="gap" id="goalGap">
                            <label for="goalGap" style="margin: 0; cursor: pointer;">I need to fill a budget gap</label>
                        </div>
                    </div>
                </div>

                <div class="form-group" id="specificGoalField" style="display: none;">
                    <label>Target Monthly Income (Net)</label>
                    <input type="number" id="targetIncome" step="100" placeholder="3000">
                    <div class="help-text">How much you want to take home monthly after expenses</div>
                </div>

                <div class="form-group" id="gapGoalField" style="display: none;">
                    <label>Monthly Budget Gap to Fill</label>
                    <input type="number" id="budgetGap" step="50" placeholder="500">
                    <div class="help-text">How much extra income you need each month to make ends meet</div>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #2c3e50;">üí∞ Your Teaching Business</h3>

                <div class="form-group">
                    <label>Lesson Length (minutes)</label>
                    <input type="number" id="lessonLength" placeholder="30" step="5">
                </div>

                <div class="form-group">
                    <label>Rate Per Lesson</label>
                    <input type="number" id="lessonRate" step="0.01" placeholder="40.00">
                </div>

                <div class="form-group">
                    <label>Monthly Business Expenses</label>
                    <input type="number" id="expenses" step="10" placeholder="200">
                    <div class="help-text">Materials, studio costs, professional development, etc.</div>
                </div>

                <div class="form-group">
                    <label>Current Number of Students</label>
                    <input type="number" id="currentStudents" placeholder="10">
                    <div class="help-text">How many students do you have right now?</div>
                </div>

                <h3 style="margin-top: 30px; margin-bottom: 15px; color: #2c3e50;">‚è∞ Your Available Time</h3>

                <div class="form-group">
                    <label>Hours Available for Teaching Per Week</label>
                    <input type="number" id="availableHours" step="1" placeholder="20">
                    <div class="help-text">Total hours you can dedicate to lessons, prep, and admin combined</div>
                </div>

                <div class="form-group">
                    <label>Prep Time Per Lesson (minutes)</label>
                    <input type="number" id="prepTime" placeholder="10" step="5">
                    <div class="help-text">Average time preparing materials per lesson</div>
                </div>

                <div class="form-group">
                    <label>Weekly Admin Hours</label>
                    <input type="number" id="adminTime" step="0.5" placeholder="2">
                    <div class="help-text">Emails, scheduling, billing, etc.</div>
                </div>

                <button class="calculate-btn" onclick="calculateCapacity()">Calculate My Student Capacity</button>
            </div>

            <div id="results" class="results">
                <div class="summary-cards">
                    <div class="summary-card">
                        <h3>Students Needed</h3>
                        <div class="value" id="studentsNeeded">0</div>
                    </div>
                    <div class="summary-card">
                        <h3>Current Students</h3>
                        <div class="value" id="currentStudentDisplay">0</div>
                    </div>
                    <div class="summary-card">
                        <h3>Max Capacity</h3>
                        <div class="value" id="maxCapacity">0</div>
                    </div>
                </div>

                <div class="breakdown">
                    <h3>‚è∞ Time Analysis</h3>
                    
                    <div class="breakdown-item">
                        <div class="label">
                            Teaching Time Per Week
                            <span class="sublabel" id="teachingBreakdown">0 students √ó 0 min</span>
                        </div>
                        <div class="amount" id="teachingTime">0 hrs</div>
                    </div>

                    <div class="breakdown-item">
                        <div class="label">
                            Prep Time Per Week
                            <span class="sublabel" id="prepBreakdown">0 min per lesson</span>
                        </div>
                        <div class="amount" id="totalPrepTime">0 hrs</div>
                    </div>

                    <div class="breakdown-item">
                        <div class="label">
                            Admin Time Per Week
                            <span class="sublabel">Scheduling, billing, emails</span>
                        </div>
                        <div class="amount" id="adminTimeDisplay">0 hrs</div>
                    </div>

                    <div class="breakdown-item" style="border-left-color: #F4A261; background: linear-gradient(135deg, #FFD93D20 0%, #F4A26120 100%);">
                        <div class="label">
                            <strong>Total Weekly Hours Needed</strong>
                            <span class="sublabel">All time required to serve students</span>
                        </div>
                        <div class="amount" id="totalHoursNeeded">0 hrs</div>
                    </div>

                    <div class="breakdown-item">
                        <div class="label">
                            <strong>Hours Available</strong>
                            <span class="sublabel">What you have available</span>
                        </div>
                        <div class="amount" id="hoursAvailable">0 hrs</div>
                    </div>
                </div>

                <div class="breakdown">
                    <h3>üí∞ Income Projection</h3>
                    
                    <div class="breakdown-item">
                        <div class="label">
                            Gross Monthly Income
                            <span class="sublabel" id="incomeCalc">0 students √ó $0 √ó 4 weeks</span>
                        </div>
                        <div class="amount" id="grossIncome">$0</div>
                    </div>

                    <div class="breakdown-item">
                        <div class="label">
                            Monthly Expenses
                            <span class="sublabel">Business costs</span>
                        </div>
                        <div class="amount" id="expensesDisplay">$0</div>
                    </div>

                    <div class="breakdown-item" style="border-left-color: #10b981; background: #d1fae5;">
                        <div class="label">
                            <strong>Net Monthly Income</strong>
                            <span class="sublabel">Take-home after expenses</span>
                        </div>
                        <div class="amount" id="netIncome">$0</div>
                    </div>
                </div>

                <div class="final-amount" id="capacityStatus">
                    <h3>üìä Your Capacity Status</h3>
                    <div class="value" id="capacityMessage">Analyzing...</div>
                    <p style="margin-top: 15px; font-size: 1.1em;" id="capacityDetail"></p>
                </div>

                <div id="alertBox" style="display: none;"></div>

                <div class="tip-box">
                    <strong>üí° Understanding Your Capacity</strong>
                    <p><strong>Underbooked:</strong> You have room to grow! Focus on student acquisition to increase income without overextending yourself.</p>
                    <p><strong>Optimal Capacity (80-90%):</strong> Perfect! You're meeting your goals with a sustainable workload and have buffer room for occasional challenges.</p>
                    <p><strong>At Capacity (90-100%):</strong> You're maxed out. To earn more, you need to raise rates‚Äînot add students. Any additional students risk burnout.</p>
                    <p><strong>Overbooked (100%+):</strong> Warning! You're working beyond your stated capacity. This is unsustainable. Raise rates, reduce admin time, or decline new students.</p>
                    <p><strong>Strategy Tip:</strong> If you need more income but are at capacity, raising rates 10-15% is far better than adding students. Quality over quantity protects your wellbeing and teaching excellence.</p>
                </div>
            </div>
        </div>

        <div class="footer">
            <p><strong>Connect with Alayna Marie:</strong></p>
            <p>üîó <a href="https://linktr.ee/alaynamarieweimer" target="_blank">linktr.ee/alaynamarieweimer</a></p>
            <p style="margin-top: 20px;">Need professional support as you grow?</p>
            <p><strong>Nonprofit Resources:</strong> <a href="https://igniteempowermentfoundation.org" target="_blank">igniteempowermentfoundation.org</a></p>
            <p><strong>Fractional Services:</strong> <a href="https://www.ignitepositivechanges.com" target="_blank">www.ignitepositivechanges.com</a></p>
            <p class="brand-name">Discover Your Success with Alayna Marie</p>
            <p class="copyright">¬© 2025 Alayna Marie Weimer. All Rights Reserved.</p>
        </div>
    </div>

    <script>
        const CORRECT_PASSWORD = "TeachWithProfit2025";
        window.addEventListener('DOMContentLoaded', function() {
            if (sessionStorage.getItem('musicTeacherAuth') === 'true') {
                document.getElementById('passwordOverlay').classList.add('hidden');
            }
        });
        function checkPassword() {
            const input = document.getElementById('passwordInput').value;
            if (input === CORRECT_PASSWORD) {
                sessionStorage.setItem('musicTeacherAuth', 'true');
                document.getElementById('passwordOverlay').classList.add('hidden');
            } else {
                document.getElementById('errorMessage').classList.add('show');
                document.getElementById('passwordInput').value = '';
            }
        }
        document.getElementById('passwordInput')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkPassword();
        });

        function selectRadio(groupName, value) {
            document.querySelectorAll(`input[name="${groupName}"]`).forEach(radio => {
                if (radio.value === value) {
                    radio.checked = true;
                    radio.closest('.radio-option').classList.add('selected');
                } else {
                    radio.closest('.radio-option').classList.remove('selected');
                }
            });

            // Show/hide goal fields
            if (groupName === 'goalType') {
                if (value === 'specific') {
                    document.getElementById('specificGoalField').style.display = 'block';
                    document.getElementById('gapGoalField').style.display = 'none';
                } else {
                    document.getElementById('specificGoalField').style.display = 'none';
                    document.getElementById('gapGoalField').style.display = 'block';
                }
            }
        }

        function calculateCapacity() {
            const goalType = document.querySelector('input[name="goalType"]:checked')?.value;
            const targetIncome = parseFloat(document.getElementById('targetIncome').value) || 0;
            const budgetGap = parseFloat(document.getElementById('budgetGap').value) || 0;
            const lessonLength = parseFloat(document.getElementById('lessonLength').value) || 0;
            const lessonRate = parseFloat(document.getElementById('lessonRate').value) || 0;
            const expenses = parseFloat(document.getElementById('expenses').value) || 0;
            const currentStudents = parseFloat(document.getElementById('currentStudents').value) || 0;
            const availableHours = parseFloat(document.getElementById('availableHours').value) || 0;
            const prepTime = parseFloat(document.getElementById('prepTime').value) || 0;
            const adminTime = parseFloat(document.getElementById('adminTime').value) || 0;

            if (!goalType || !lessonLength || !lessonRate || !availableHours) {
                alert('Please complete all required fields.');
                return;
            }

            // Determine net income goal
            const netIncomeGoal = goalType === 'specific' ? targetIncome : budgetGap;

            if (!netIncomeGoal) {
                alert('Please enter your income goal or budget gap.');
                return;
            }

            // Calculate students needed
            const grossIncomeNeeded = netIncomeGoal + expenses;
            const monthlyLessonsNeeded = grossIncomeNeeded / lessonRate;
            const studentsNeeded = Math.ceil(monthlyLessonsNeeded / 4); // 4 weeks average

            // Calculate time required for needed students
            const teachingHoursPerWeek = (studentsNeeded * lessonLength) / 60;
            const prepHoursPerWeek = (studentsNeeded * prepTime) / 60;
            const totalHoursNeeded = teachingHoursPerWeek + prepHoursPerWeek + adminTime;

            // Calculate maximum capacity
            const availableTeachingHours = availableHours - adminTime;
            const minutesPerStudent = lessonLength + prepTime;
            const maxStudents = Math.floor((availableTeachingHours * 60) / minutesPerStudent);

            // Calculate current student load
            const currentTeachingHours = (currentStudents * lessonLength) / 60;
            const currentPrepHours = (currentStudents * prepTime) / 60;
            const currentTotalHours = currentTeachingHours + currentPrepHours + adminTime;

            // Calculate capacity percentage
            const capacityPercentage = (totalHoursNeeded / availableHours) * 100;

            // Update displays
            document.getElementById('studentsNeeded').textContent = studentsNeeded;
            document.getElementById('currentStudentDisplay').textContent = currentStudents;
            document.getElementById('maxCapacity').textContent = maxStudents;

            // Time analysis
            document.getElementById('teachingBreakdown').textContent = `${studentsNeeded} students √ó ${lessonLength} min`;
            document.getElementById('teachingTime').textContent = teachingHoursPerWeek.toFixed(1) + ' hrs';
            document.getElementById('prepBreakdown').textContent = `${prepTime} min per lesson`;
            document.getElementById('totalPrepTime').textContent = prepHoursPerWeek.toFixed(1) + ' hrs';
            document.getElementById('adminTimeDisplay').textContent = adminTime.toFixed(1) + ' hrs';
            document.getElementById('totalHoursNeeded').textContent = totalHoursNeeded.toFixed(1) + ' hrs';
            document.getElementById('hoursAvailable').textContent = availableHours.toFixed(1) + ' hrs';

            // Income projection
            document.getElementById('incomeCalc').textContent = `${studentsNeeded} students √ó $${lessonRate.toFixed(0)} √ó 4 weeks`;
            const projectedGross = studentsNeeded * lessonRate * 4;
            const projectedNet = projectedGross - expenses;
            document.getElementById('grossIncome').textContent = '$' + projectedGross.toFixed(0);
            document.getElementById('expensesDisplay').textContent = '$' + expenses.toFixed(0);
            document.getElementById('netIncome').textContent = '$' + projectedNet.toFixed(0);

            // Capacity status
            const statusDiv = document.getElementById('capacityStatus');
            let statusMessage, statusDetail, statusClass;

            if (studentsNeeded > maxStudents) {
                statusClass = 'critical';
                statusMessage = 'üö® IMPOSSIBLE';
                statusDetail = `You need ${studentsNeeded} students but can only handle ${maxStudents} with your available time. You MUST raise rates or increase available hours.`;
                
                // Show critical alert
                const neededRate = (grossIncomeNeeded / (maxStudents * 4)).toFixed(2);
                const alertBox = document.getElementById('alertBox');
                alertBox.innerHTML = `
                    <div class="alert-box">
                        <strong>‚ö†Ô∏è Critical: Goal Impossible With Current Setup</strong>
                        <p><strong>The Problem:</strong> To earn $${netIncomeGoal.toFixed(0)}/month at $${lessonRate}/lesson, you need ${studentsNeeded} students. But you only have ${availableHours} hours available per week, which maxes out at ${maxStudents} students.</p>
                        <p><strong>Solution 1 (Recommended):</strong> Raise your rate to <strong>$${neededRate}</strong> per lesson. This lets you hit your goal with ${maxStudents} students.</p>
                        <p><strong>Solution 2:</strong> Increase your available hours to ${Math.ceil(totalHoursNeeded)} hours per week to accommodate ${studentsNeeded} students.</p>
                        <p><strong>Solution 3:</strong> Reduce your income goal to $${Math.floor((maxStudents * lessonRate * 4) - expenses)} per month, which is achievable with ${maxStudents} students.</p>
                    </div>
                `;
                alertBox.style.display = 'block';
            } else if (capacityPercentage >= 90) {
                statusClass = 'warning';
                statusMessage = '‚ö†Ô∏è AT CAPACITY';
                statusDetail = `You're using ${capacityPercentage.toFixed(0)}% of your available time. You can handle ${studentsNeeded} students but have little room for error. Consider this your maximum.`;
            } else if (capacityPercentage >= 70) {
                statusClass = 'final-amount';
                statusMessage = '‚úÖ OPTIMAL';
                statusDetail = `Perfect! You need ${studentsNeeded} students and you have the capacity (${capacityPercentage.toFixed(0)}% utilization). This leaves buffer room for sustainability.`;
            } else {
                statusClass = 'final-amount';
                statusMessage = 'üìä UNDERBOOKED';
                statusDetail = `You have plenty of capacity! You need ${studentsNeeded} students but could handle up to ${maxStudents}. You're only using ${capacityPercentage.toFixed(0)}% of your available time.`;
            }

            statusDiv.className = statusClass;
            document.getElementById('capacityMessage').textContent = statusMessage;
            document.getElementById('capacityDetail').textContent = statusDetail;

            // Show results
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>
