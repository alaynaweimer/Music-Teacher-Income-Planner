<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Referral Tracker - Discover Your Success with Alayna Marie</title>
<!--
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  REFERRAL TRACKER - MUSIC TEACHERS
  Copyright ¬© 2025 Alayna Marie Weimer. All Rights Reserved.
  BRAND: Discover Your Success with Alayna Marie
  For inquiries: alayna@ignitepositivechanges.com
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 50%, #E76F51 100%);
            min-height: 100vh;
            padding-bottom: 40px;
        }
        #passwordOverlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 50%, #E76F51 100%);
            display: flex; align-items: center; justify-content: center; z-index: 9999;
        }
        #passwordOverlay.hidden { display: none; }
        .password-box {
            background: white; padding: 40px; border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); max-width: 400px; width: 90%; text-align: center;
        }
        .password-box h2 { color: #2c3e50; margin-bottom: 10px; font-size: 1.8em; }
        .password-box p { color: #666; margin-bottom: 30px; }
        .password-box input {
            width: 100%; padding: 15px; border: 2px solid #e0e0e0;
            border-radius: 10px; font-size: 1.1em; margin-bottom: 20px;
        }
        .password-box input:focus { outline: none; border-color: #F4A261; }
        .password-box button {
            width: 100%; background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            color: #2c3e50; border: none; padding: 15px; font-size: 1.1em;
            border-radius: 10px; cursor: pointer; font-weight: 700;
        }
        .error-message { color: #dc2626; margin-top: 15px; font-size: 0.9em; display: none; }
        .error-message.show { display: block; }
        .container { max-width: 1000px; margin: 0 auto; padding: 20px; }
        .header {
            background: white; border-radius: 20px; padding: 30px 20px;
            text-align: center; margin-bottom: 30px; box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .back-link {
            display: inline-block; color: #F4A261; text-decoration: none;
            margin-bottom: 15px; font-weight: 600;
        }
        .back-link:hover { text-decoration: underline; }
        .logo-text {
            font-size: 2.5em; font-weight: 700; color: #2c3e50; margin-bottom: 10px;
        }
        .logo-subtitle { font-size: 1.2em; color: #F4A261; font-weight: 600; margin-bottom: 20px; }
        .header h1 { color: #2c3e50; font-size: 2.2em; margin-bottom: 10px; font-weight: 700; }
        .header p { color: #666; font-size: 1.05em; margin-top: 10px; }
        
        .tab-navigation {
            display: flex; gap: 10px; justify-content: center;
            margin: 30px 0; flex-wrap: wrap;
        }
        .tab-btn {
            background: white; color: #2c3e50; border: 2px solid #e0e0e0;
            padding: 15px 30px; border-radius: 12px; cursor: pointer;
            font-weight: 600; font-size: 1.05em; transition: all 0.3s;
            display: flex; align-items: center; gap: 10px;
        }
        .tab-btn:hover { border-color: #F4A261; transform: translateY(-2px); }
        .tab-btn.active {
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            border-color: #F4A261; color: #2c3e50;
        }
        .tab-icon { font-size: 1.3em; }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .why-matters {
            background: white; border-radius: 15px; padding: 35px; margin-bottom: 30px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1); border-top: 5px solid #FFD93D;
        }
        .why-matters h2 { color: #2c3e50; font-size: 1.8em; margin-bottom: 20px; font-weight: 700; }
        .why-matters p { color: #2c3e50; font-size: 1.05em; margin-bottom: 15px; line-height: 1.7; }
        .why-matters strong { color: #F4A261; }
        .benefits-banner {
            background: linear-gradient(180deg, #ffffff 0%, #FFE8CC 50%);
            border: 3px solid #FFD93D; border-radius: 15px; padding: 30px; margin-bottom: 30px;
            box-shadow: 0 6px 20px rgba(244, 162, 97, 0.3);
        }
        .benefits-banner h2 {
            color: #2c3e50; font-size: 1.6em; margin-bottom: 20px; text-align: center; font-weight: 700;
        }
        .benefit-item {
            display: flex; align-items: start; margin: 15px 0; padding: 12px;
            background: white; border-radius: 10px; border-left: 4px solid #F4A261;
        }
        .benefit-icon { font-size: 1.5em; margin-right: 15px; min-width: 30px; }
        .benefit-text strong { color: #2c3e50; display: block; margin-bottom: 5px; }
        .benefit-text p { color: #666; margin: 0; }
        .content-box {
            background: white; border-radius: 15px; padding: 40px;
            margin-bottom: 30px; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        .section {
            margin-bottom: 30px; padding: 25px; background: #f8f9fa;
            border-radius: 12px; border-left: 5px solid #F4A261;
        }
        .section h2 { color: #2c3e50; font-size: 1.5em; margin-bottom: 20px; font-weight: 700; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #2c3e50; font-weight: 600; font-size: 1.05em; }
        .help-text { font-size: 0.85em; color: #666; margin-top: 4px; font-style: italic; }
        input[type="number"], select {
            width: 100%; padding: 14px; border: 2px solid #e0e0e0;
            border-radius: 8px; font-size: 1em; transition: border-color 0.3s;
        }
        input:focus, select:focus { outline: none; border-color: #F4A261; box-shadow: 0 0 0 3px rgba(244, 162, 97, 0.1); }
        .add-btn, .calculate-btn {
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            color: #2c3e50; border: none; padding: 15px 25px; font-size: 1.1em;
            border-radius: 10px; cursor: pointer; font-weight: 700;
            transition: transform 0.2s, box-shadow 0.2s; text-transform: uppercase;
        }
        .add-btn:hover, .calculate-btn:hover { 
            transform: translateY(-2px); box-shadow: 0 6px 15px rgba(244, 162, 97, 0.4); 
        }
        .calculate-btn { width: 100%; font-size: 1.3em; padding: 18px; margin-top: 20px; letter-spacing: 1px; }
        .entry-list {
            margin-top: 25px;
        }
        .entry-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px; margin-bottom: 10px; background: white;
            border-radius: 8px; border-left: 4px solid #F4A261;
        }
        .entry-info { flex: 1; }
        .entry-info strong { color: #2c3e50; display: block; margin-bottom: 5px; }
        .entry-info span { color: #666; font-size: 0.9em; }
        .remove-btn {
            background: #ef4444; color: white; border: none;
            padding: 8px 15px; border-radius: 6px; cursor: pointer;
            font-size: 0.9em; font-weight: 600;
        }
        .remove-btn:hover { background: #dc2626; }
        .results { display: none; margin-top: 30px; }
        .results.show { display: block; }
        .summary-cards {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px; margin-bottom: 30px;
        }
        .summary-card {
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            padding: 25px; border-radius: 15px; text-align: center;
            box-shadow: 0 6px 20px rgba(244, 162, 97, 0.3);
        }
        .summary-card h3 {
            color: #2c3e50; font-size: 0.9em; margin-bottom: 10px;
            text-transform: uppercase; font-weight: 700;
        }
        .summary-card .value { color: #2c3e50; font-size: 2em; font-weight: bold; }
        .channel-performance {
            background: white; padding: 30px; border-radius: 15px;
            margin-bottom: 25px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .channel-performance h3 { color: #2c3e50; margin-bottom: 20px; font-size: 1.5em; font-weight: 700; }
        .channel-row {
            display: grid; grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 15px; padding: 15px; margin-bottom: 10px;
            background: #f8f9fa; border-radius: 8px; border-left: 4px solid #F4A261;
            align-items: center;
        }
        .channel-row.header {
            background: linear-gradient(135deg, #FFD93D 0%, #F4A261 100%);
            font-weight: 700; border-left: none;
        }
        .channel-row.best { border-left-color: #10b981; background: #d1fae5; }
        .channel-name { font-weight: 600; color: #2c3e50; }
        .channel-stat { text-align: center; }
        .channel-stat.highlight { font-size: 1.2em; font-weight: bold; color: #10b981; }
        .recommendations {
            background: #e3f2fd; padding: 25px; border-radius: 10px;
        }
        .recommendations h4 { color: #1976d2; margin-bottom: 15px; font-size: 1.2em; }
        .recommendations ul { margin-left: 20px; }
        .recommendations li { color: #2c3e50; margin: 10px 0; line-height: 1.6; }
        .tip-box {
            background: #e3f2fd; border-left: 5px solid #2196f3; padding: 25px;
            border-radius: 10px; margin-top: 25px;
        }
        .tip-box strong { color: #1976d2; display: block; margin-bottom: 15px; font-size: 1.15em; }
        .tip-box p { color: #2c3e50; margin: 12px 0; line-height: 1.7; }
        .footer {
            background: white; border-radius: 15px; padding: 30px; margin-top: 30px;
            text-align: center; box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }
        .footer p { color: #666; margin: 8px 0; }
        .footer a { color: #F4A261; text-decoration: none; font-weight: 600; }
        .footer a:hover { text-decoration: underline; }
        .footer .brand-name { color: #2c3e50; font-weight: 700; font-size: 1.2em; margin-top: 15px; }
        .footer .copyright { color: #999; font-size: 0.9em; margin-top: 10px; }
        @media (max-width: 768px) {
            .logo-text { font-size: 1.8em; }
            .header h1 { font-size: 1.6em; }
            .summary-cards { grid-template-columns: 1fr; }
            .channel-row { grid-template-columns: 1fr; gap: 10px; }
            .channel-row.header { display: none; }
        }
    </style>
</head>
<body>
    <div id="passwordOverlay">
        <div class="password-box">
            <h2>üîê Access Required</h2>
            <p>Enter your toolkit password to access this tool</p>
            <input type="password" id="passwordInput" placeholder="Enter password">
            <button onclick="checkPassword()">Unlock Tool</button>
            <div id="errorMessage" class="error-message">‚ùå Incorrect password. Please try again.</div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <a href="index.html" class="back-link">‚Üê Back to Toolkit Hub</a>
            <div class="logo-text">Discover Your Success</div>
            <div class="logo-subtitle">with Alayna Marie</div>
            <h1>üìä Referral Tracker</h1>
            <p>Track where your students come from and measure conversion rates so you know which marketing channels actually work.</p>
        </div>

        <div class="tab-navigation">
            <button class="tab-btn active" onclick="switchTab('calculator')">
                <span class="tab-icon">üìù</span> Tracker
            </button>
            <button class="tab-btn" onclick="switchTab('results')" id="resultsTabBtn" style="display: none;">
                <span class="tab-icon">üìä</span> Analysis
            </button>
            <button class="tab-btn" onclick="switchTab('learn')">
                <span class="tab-icon">üìö</span> Learn
            </button>
        </div>

        <!-- TRACKER TAB -->
        <div id="calculatorTab" class="tab-content active">
            <div class="section">
                <h2>üìù Track Your Inquiries & Enrollments</h2>
                <p style="color: #666; margin-bottom: 20px;">For each marketing channel, enter how many inquiries you received and how many became students.</p>
                
                <div class="form-group">
                    <label>Marketing Channel</label>
                    <select id="channelSelect">
                        <option value="">Select a channel...</option>
                        <option value="Word-of-Mouth">Word-of-Mouth Referrals</option>
                        <option value="Facebook Groups">Facebook Community Groups</option>
                        <option value="School Partnerships">School & Community Partnerships</option>
                        <option value="Google/Website">Google Business / Website</option>
                        <option value="Paid Ads">Paid Advertising</option>
                        <option value="Instagram">Instagram</option>
                        <option value="Craigslist">Craigslist / Local Classifieds</option>
                        <option value="Music Store">Music Store Referrals</option>
                        <option value="Recital/Event">Recital or Event Attendees</option>
                        <option value="Other">Other Source</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Number of Inquiries</label>
                    <input type="number" id="inquiries" placeholder="10">
                    <div class="help-text">How many people contacted you from this source?</div>
                </div>

                <div class="form-group">
                    <label>Number Who Became Students</label>
                    <input type="number" id="enrolled" placeholder="4">
                    <div class="help-text">How many actually enrolled and started lessons?</div>
                </div>

                <button class="add-btn" onclick="addEntry()">‚ûï Add Entry</button>

                <div class="entry-list" id="entryList">
                    <!-- Entries will be added here -->
                </div>

                <button class="calculate-btn" onclick="analyzeData()" style="margin-top: 30px;">Analyze My Referral Sources</button>
            </div>
        </div>
        <!-- END TRACKER TAB -->

        <!-- ANALYSIS TAB -->
        <div id="resultsTab" class="tab-content">
            <div class="content-box">
            <div id="results" class="results">
                <div class="summary-cards">
                    <div class="summary-card">
                        <h3>Total Inquiries</h3>
                        <div class="value" id="totalInquiries">0</div>
                    </div>
                    <div class="summary-card">
                        <h3>Students Enrolled</h3>
                        <div class="value" id="totalEnrolled">0</div>
                    </div>
                    <div class="summary-card">
                        <h3>Overall Conversion</h3>
                        <div class="value" id="overallConversion">0%</div>
                    </div>
                </div>

                <div class="channel-performance">
                    <h3>üìä Channel Performance Breakdown</h3>
                    <div id="channelBreakdown">
                        <!-- Channel rows will be inserted here -->
                    </div>
                </div>

                <div class="recommendations" id="recommendations">
                    <h4>üéØ Your Optimization Recommendations</h4>
                    <ul id="recommendationsList">
                        <!-- Recommendations will be inserted here -->
                    </ul>
                </div>

                <div class="tip-box">
                    <strong>üí° Using Your Data Effectively</strong>
                    <p><strong>Update Regularly:</strong> Track this monthly or quarterly. Patterns emerge over time‚Äîone month might be an outlier.</p>
                    <p><strong>Ask Every Single Inquiry:</strong> "How did you hear about me?" Make it part of your initial conversation or intake form. No guessing!</p>
                    <p><strong>Conversion Rate Benchmarks:</strong> Referrals should convert at 60-80%. Facebook groups 20-40%. Paid ads 10-30%. If yours are significantly lower, your messaging or trial lesson experience needs work.</p>
                    <p><strong>Double Down on Winners:</strong> If word-of-mouth is crushing it, systematize referral requests. If Facebook groups work, join more and post more consistently.</p>
                    <p><strong>Kill What's Not Working:</strong> If you've gotten 20+ inquiries from a channel with zero enrollments, that channel isn't working. Stop wasting time there.</p>
                </div>
            </div>
            </div>
        </div>
        <!-- END ANALYSIS TAB -->

        <!-- LEARN TAB -->
        <div id="learnTab" class="tab-content">
            <div class="why-matters">
                <h2>üéØ Why This Matters</h2>
                <p>You're spending time and possibly money on marketing. But do you actually know which channels are working? Most teachers have no idea whether their Facebook posts, school flyers, or Google ads are generating students‚Äîthey're just hoping something works.</p>
                <p><strong>The reality:</strong> What you measure, you can improve. If you track where every inquiry comes from, you'll discover that maybe 80% of your students come from 20% of your marketing efforts. That means you can double down on what works and stop wasting time on what doesn't.</p>
                <p><strong>The Problem:</strong> Without tracking, teachers keep investing in low-performing channels out of habit. They post in Facebook groups that never generate inquiries. They pay for ads that bring tire-kickers but no enrollments. They miss opportunities to optimize their best-performing channels.</p>
                <p>This tracker helps you measure conversion rates by source so you can focus your energy where it actually generates students.</p>
            </div>

            <div class="benefits-banner">
                <h2>‚ú® What You'll Discover</h2>
                <div class="benefit-item">
                    <div class="benefit-icon">üìä</div>
                    <div class="benefit-text">
                        <strong>Channel Performance Data</strong>
                        <p>See exactly which marketing sources generate the most students</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üéØ</div>
                    <div class="benefit-text">
                        <strong>Conversion Rate Analysis</strong>
                        <p>Know which channels convert inquiries to students most effectively</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üí∞</div>
                    <div class="benefit-text">
                        <strong>ROI Clarity</strong>
                        <p>Understand which free and paid channels deliver the best return</p>
                    </div>
                </div>
                <div class="benefit-item">
                    <div class="benefit-icon">üöÄ</div>
                    <div class="benefit-text">
                        <strong>Optimization Recommendations</strong>
                        <p>Get specific advice on where to focus your marketing efforts</p>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>üí° Tracking Best Practices</strong>
                <p><strong>Ask Every Single Time:</strong> "How did you hear about me?" should be part of your initial conversation or intake form. No exceptions. No guessing.</p>
                <p><strong>The 80/20 Rule Is Real:</strong> Most teachers discover that 80% of their students come from 20% of their marketing channels. Once you identify that 20%, double down on it.</p>
                <p><strong>Conversion Rate Benchmarks:</strong> Word-of-mouth referrals should convert at 60-80%. Facebook groups 20-40%. School partnerships 25-35%. Paid ads 10-30%. If yours are significantly lower, something's wrong with your messaging or trial lesson.</p>
                <p><strong>Track Over Time:</strong> One month might be an outlier. Track for at least 3 months to see real patterns emerge. Seasonal factors matter too‚Äîback-to-school vs summer.</p>
                <p><strong>Low Conversion = Fix It or Kill It:</strong> If a channel generates lots of inquiries but few students, the problem isn't the channel‚Äîit's your follow-up, pricing, or trial lesson quality. Fix those first.</p>
            </div>
        </div>
        <!-- END LEARN TAB -->

        <div class="footer">
            <p><strong>Connect with Alayna Marie:</strong></p>
            <p>üîó <a href="https://linktr.ee/alaynamarieweimer" target="_blank">linktr.ee/alaynamarieweimer</a></p>
            <p style="margin-top: 20px;">Need professional support as you grow?</p>
            <p><strong>Nonprofit Resources:</strong> <a href="https://igniteempowermentfoundation.org" target="_blank">igniteempowermentfoundation.org</a></p>
            <p><strong>Fractional Services:</strong> <a href="https://www.ignitepositivechanges.com" target="_blank">www.ignitepositivechanges.com</a></p>
            <p class="brand-name">Discover Your Success with Alayna Marie</p>
            <p class="copyright">¬© 2025 Alayna Marie Weimer. All Rights Reserved.</p>
        </div>
    </div>

    <script>
        const CORRECT_PASSWORD = "TeachWithProfit2025";
        let entries = [];

        window.addEventListener('DOMContentLoaded', function() {
            if (sessionStorage.getItem('musicTeacherAuth') === 'true') {
                document.getElementById('passwordOverlay').classList.add('hidden');
            }
        });
        function checkPassword() {
            const input = document.getElementById('passwordInput').value;
            if (input === CORRECT_PASSWORD) {
                sessionStorage.setItem('musicTeacherAuth', 'true');
                document.getElementById('passwordOverlay').classList.add('hidden');
            } else {
                document.getElementById('errorMessage').classList.add('show');
                document.getElementById('passwordInput').value = '';
            }
        }
        document.getElementById('passwordInput')?.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') checkPassword();
        });

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            if (tabName === 'calculator') {
                document.getElementById('calculatorTab').classList.add('active');
                document.querySelector('.tab-btn:nth-child(1)').classList.add('active');
            } else if (tabName === 'results') {
                document.getElementById('resultsTab').classList.add('active');
                document.querySelector('.tab-btn:nth-child(2)').classList.add('active');
            } else if (tabName === 'learn') {
                document.getElementById('learnTab').classList.add('active');
                document.querySelector('.tab-btn:nth-child(3)').classList.add('active');
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function addEntry() {
            const channel = document.getElementById('channelSelect').value;
            const inquiries = parseInt(document.getElementById('inquiries').value) || 0;
            const enrolled = parseInt(document.getElementById('enrolled').value) || 0;

            if (!channel || inquiries === 0) {
                alert('Please select a channel and enter the number of inquiries.');
                return;
            }

            if (enrolled > inquiries) {
                alert('Students enrolled cannot exceed number of inquiries.');
                return;
            }

            entries.push({ channel, inquiries, enrolled });

            // Update display
            updateEntryList();

            // Clear form
            document.getElementById('channelSelect').value = '';
            document.getElementById('inquiries').value = '';
            document.getElementById('enrolled').value = '';
        }

        function updateEntryList() {
            const listHtml = entries.map((entry, index) => {
                const conversionRate = entry.inquiries > 0 ? ((entry.enrolled / entry.inquiries) * 100).toFixed(0) : 0;
                return `
                    <div class="entry-item">
                        <div class="entry-info">
                            <strong>${entry.channel}</strong>
                            <span>${entry.inquiries} inquiries ‚Üí ${entry.enrolled} students (${conversionRate}% conversion)</span>
                        </div>
                        <button class="remove-btn" onclick="removeEntry(${index})">Remove</button>
                    </div>
                `;
            }).join('');

            document.getElementById('entryList').innerHTML = listHtml || '<p style="color: #666; text-align: center; padding: 20px;">No entries yet. Add your first referral source above.</p>';
        }

        function removeEntry(index) {
            entries.splice(index, 1);
            updateEntryList();
        }

        function analyzeData() {
            if (entries.length === 0) {
                alert('Please add at least one referral source to analyze.');
                return;
            }

            // Calculate totals
            const totalInquiries = entries.reduce((sum, e) => sum + e.inquiries, 0);
            const totalEnrolled = entries.reduce((sum, e) => sum + e.enrolled, 0);
            const overallConversion = totalInquiries > 0 ? ((totalEnrolled / totalInquiries) * 100).toFixed(1) : 0;

            // Update summary
            document.getElementById('totalInquiries').textContent = totalInquiries;
            document.getElementById('totalEnrolled').textContent = totalEnrolled;
            document.getElementById('overallConversion').textContent = overallConversion + '%';

            // Aggregate by channel
            const channelData = {};
            entries.forEach(entry => {
                if (!channelData[entry.channel]) {
                    channelData[entry.channel] = { inquiries: 0, enrolled: 0 };
                }
                channelData[entry.channel].inquiries += entry.inquiries;
                channelData[entry.channel].enrolled += entry.enrolled;
            });

            // Calculate metrics and sort by enrolled students
            const channels = Object.keys(channelData).map(channel => {
                const data = channelData[channel];
                const conversion = data.inquiries > 0 ? ((data.enrolled / data.inquiries) * 100).toFixed(1) : 0;
                return {
                    channel,
                    inquiries: data.inquiries,
                    enrolled: data.enrolled,
                    conversion: parseFloat(conversion)
                };
            }).sort((a, b) => b.enrolled - a.enrolled);

            const bestChannel = channels[0];

            // Render channel breakdown
            const breakdownHtml = `
                <div class="channel-row header">
                    <div>Channel</div>
                    <div>Inquiries</div>
                    <div>Enrolled</div>
                    <div>Conversion</div>
                </div>
                ${channels.map(ch => `
                    <div class="channel-row ${ch.channel === bestChannel.channel ? 'best' : ''}">
                        <div class="channel-name">${ch.channel} ${ch.channel === bestChannel.channel ? 'üèÜ' : ''}</div>
                        <div class="channel-stat">${ch.inquiries}</div>
                        <div class="channel-stat ${ch.channel === bestChannel.channel ? 'highlight' : ''}">${ch.enrolled}</div>
                        <div class="channel-stat">${ch.conversion}%</div>
                    </div>
                `).join('')}
            `;

            document.getElementById('channelBreakdown').innerHTML = breakdownHtml;

            // Generate recommendations
            const recommendations = [];

            // Best performing channel
            recommendations.push(`<strong>${bestChannel.channel}</strong> is your winner! With ${bestChannel.enrolled} students enrolled, focus MORE energy here. Ask yourself: how can I get even more inquiries from this source?`);

            // Low conversion warnings
            channels.forEach(ch => {
                if (ch.conversion < 20 && ch.inquiries >= 10) {
                    recommendations.push(`‚ö†Ô∏è <strong>${ch.channel}</strong> has low conversion (${ch.conversion}%). With ${ch.inquiries} inquiries but only ${ch.enrolled} enrollments, either the leads are poor quality or your follow-up needs work. Consider improving your response time or trial lesson experience.`);
                }
            });

            // High conversion, low volume opportunities
            channels.forEach(ch => {
                if (ch.conversion >= 50 && ch.inquiries < 10) {
                    recommendations.push(`üí° <strong>${ch.channel}</strong> converts well (${ch.conversion}%) but you're not getting enough inquiries. Invest more time here‚Äîthe leads are quality!`);
                }
            });

            // Overall conversion feedback
            if (overallConversion < 30) {
                recommendations.push(`üìâ Your overall conversion rate (${overallConversion}%) is below average. Focus on improving your initial response speed, trial lesson quality, and follow-up process. Every inquiry is valuable‚Äîdon't let them slip away.`);
            } else if (overallConversion >= 50) {
                recommendations.push(`üéâ Excellent overall conversion rate (${overallConversion}%)! Your follow-up and trial lessons are working. Now focus on generating MORE inquiries from your best-performing channels.`);
            }

            // Diversification check
            if (channels.length === 1) {
                recommendations.push(`‚ö†Ô∏è You're relying on a single channel. What happens if it dries up? Test at least 2-3 channels to build a sustainable student pipeline.`);
            }

            document.getElementById('recommendationsList').innerHTML = recommendations.map(r => `<li>${r}</li>`).join('');

            // Show results
            document.getElementById('results').classList.add('show');
            
            // Show and switch to Analysis tab
            document.getElementById('resultsTabBtn').style.display = 'flex';
            switchTab('results');
        }
    </script>
</body>
</html>
